import{_ as s,o as a,c as l,O as e}from"./chunks/framework.fb7bb97b.js";const h=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"serverDeveloper/mysql/mac重置密码.md","filePath":"serverDeveloper/mysql/mac重置密码.md","lastUpdated":1684202565000}'),o={name:"serverDeveloper/mysql/mac重置密码.md"},t=e(`<h2 id="mac-mysql-重置密码" tabindex="-1">Mac mysql 重置密码 <a class="header-anchor" href="#mac-mysql-重置密码" aria-label="Permalink to &quot;Mac mysql 重置密码&quot;">​</a></h2><ul><li>一、关闭 mysql 服务器</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo /usr/local/mysql/support-files/mysql.server stop</span></span></code></pre></div><p>报错</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ERROR! The server quit without updating PID file (/usr/local/mysql/data/MacBook-Pro-2.local.err).</span></span>
<span class="line"><span style="color:#A6ACCD;">  错误！服务器退出而不更新PID文件</span></span></code></pre></div><p>思考：因为报错路径中有(/usr/local/mysql/data/MacBook-Pro-2.local.err)猜测这个应该是报错的日志文件，但在文件管理器中没有找到 data 目录 解决方案：</p><ol><li>进入到 mysql 安装目录的 bin 目录下，执行 mysqld --initialize-insecure --user=mysql 生成 data 文件夹</li><li>想要查看 MacBook-Pro-2.local.err 报错日志，发现 permission denied: data，修改权限 sudo chmod 777 /usr/local/mysql/data</li><li>发现 data 可以打开了，但里面的文件依旧不能打开查看，执行 sudo chmod -R 777 /usr/local/mysql/data 递归开启权限</li><li>查看 MacBook-Pro-2.local.err 报错日志，发现 mac Unable to lock ./ibdata1 error: 35，和进程相关，输入$ ps aux | grep mysqld 检查 mysql 进程</li><li>找到相应的进程号，停掉相应的进程，最后保留一条 mysql 的进程即可 kill 1234(此处 1234 为你的进程号)</li></ol><ul><li>二、进入 mysql 的 bin 目录</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">cd /usr/local/mysql/bin</span></span></code></pre></div><ul><li>三、使用 root 账户（这一步要输入 mac 密码）</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">sudo su</span></span></code></pre></div><ul><li>四、设置不需要密码登录</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">./mysqld_safe --skip-grant-tables &amp;</span></span></code></pre></div><ul><li>五、置空密码</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">update user set authentication_string=&#39;&#39; where user=&#39;root&#39;;</span></span></code></pre></div><ul><li>六、刷新</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">flush privileges;</span></span></code></pre></div><ul><li>七、修改密码</li></ul><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;你的新密码&#39;; 提示语法错误，因为我的是mysql8.0需要执行下面的指令进行重置</span></span>
<span class="line"><span style="color:#A6ACCD;">  ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;123456&#39;;</span></span></code></pre></div><p>完成重置</p>`,20),n=[t];function i(c,p,r,d,u,m){return a(),l("div",null,n)}const g=s(o,[["render",i]]);export{h as __pageData,g as default};
